<!DOCTYPE html>
<html lang="bs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, interactive-widget=resizes-content">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#1a1a2e">
  <title>Radnja Tracker</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="app">
    <!-- Login Screen -->
    <div class="login-screen" id="loginScreen">
      <div class="login-container">
        <div class="login-logo">ğŸª</div>
        <h1 class="login-title">Radnja Tracker</h1>
        <form id="loginForm" class="login-form">
          <div class="form-group">
            <label for="username">KorisniÄko ime</label>
            <input type="text" id="username" name="username" required autocomplete="username">
          </div>
          <div class="form-group">
            <label for="password">Lozinka</label>
            <input type="password" id="password" name="password" required autocomplete="current-password">
          </div>
          <button type="submit" class="btn-login">Prijavi se</button>
          <div class="login-error" id="loginError"></div>
        </form>
      </div>
    </div>

    <!-- Main App (hidden until login) -->
    <div class="main-app" id="mainApp" style="display: none;">
      <!-- Header -->
      <header class="header">
        <div class="header-content">
          <h1>ğŸª Radnja</h1>
          <div class="header-right">
            <span class="user-badge" id="userBadge"></span>
            <button class="btn-logout" id="btnLogout">â†ª</button>
          </div>
        </div>
        <div class="datum-display" id="trenutniDatum"></div>
      </header>

      <!-- Navigation Tabs -->
      <nav class="tabs" id="tabsNav">
        <button class="tab active" data-tab="prodaja">
          <span class="tab-icon">ğŸ’°</span>
          <span>Prodaja</span>
        </button>
        <button class="tab" data-tab="analitika" id="analitikaTabBtn">
          <span class="tab-icon">ğŸ“Š</span>
          <span>Analitika</span>
        </button>
      </nav>

      <!-- Prodaja Tab -->
      <main class="content" id="prodaja-tab">
        <!-- Dnevni promet -->
        <div class="promet-kartica">
          <div class="promet-label">DanaÅ¡nji promet</div>
          <div class="promet-iznos" id="dnevniPromet">0,00 KM</div>
          <div class="promet-detalji">
            <span class="promet-broj" id="brojProdaja">0 prodaja</span>
            <span class="promet-placanje" id="prometPlacanje"></span>
          </div>
        </div>

        <!-- Odabir artikla -->
        <section class="section">
          <h2 class="section-title">Odaberi artikal</h2>
          <div class="artikli-grid" id="artikliGrid">
            <!-- Artikli se uÄitavaju dinamiÄki -->
          </div>
        </section>

        <!-- Unos cijene -->
        <section class="section cijena-section" id="cijenaSection" style="display: none;">
          <h2 class="section-title">Unesi detalje za <span id="odabraniArtikal"></span></h2>
          
          <!-- KoliÄina -->
          <div class="kolicina-row">
            <label>KoliÄina:</label>
            <div class="kolicina-controls">
              <button class="kolicina-btn" id="kolicinaMin">âˆ’</button>
              <span class="kolicina-display" id="kolicinaDisplay">1</span>
              <button class="kolicina-btn" id="kolicinaPlus">+</button>
            </div>
          </div>
          
          <!-- Cijena -->
          <div class="cijena-input-wrapper">
            <input type="number" id="cijenaInput" class="cijena-input" placeholder="0" step="1" min="0" inputmode="numeric">
            <span class="valuta">KM</span>
          </div>
          <div class="brzi-iznosi" id="brziIznosi">
            <!-- Shortcuti se uÄitavaju dinamiÄki -->
          </div>
          
          <!-- NaÄin plaÄ‡anja -->
          <div class="placanje-row">
            <button class="placanje-btn active" data-placanje="kes" id="placanjeKes">
              ğŸ’µ KeÅ¡
            </button>
            <button class="placanje-btn" data-placanje="kartica" id="placanjeKartica">
              ğŸ’³ Kartica
            </button>
          </div>
          
          <!-- Ukupno preview -->
          <div class="ukupno-preview" id="ukupnoPreview">
            Ukupno: <strong>0,00 KM</strong>
          </div>
          
          <button class="btn-spremi" id="btnSpremi">
            <span>âœ“</span> Spremi prodaju
          </button>
        </section>

        <!-- DanaÅ¡nje prodaje -->
        <section class="section">
          <h2 class="section-title">DanaÅ¡nje prodaje</h2>
          <div class="prodaje-lista" id="prodajeLista">
            <!-- Prodaje se uÄitavaju dinamiÄki -->
          </div>
        </section>
      </main>

      <!-- Analitika Tab -->
      <main class="content" id="analitika-tab" style="display: none;">
        <!-- Kalendar navigacija -->
        <div class="kalendar-nav">
          <button class="kalendar-btn" id="prevMonth">â†</button>
          <div class="mjesec-godina" id="mjesecGodina"></div>
          <button class="kalendar-btn" id="nextMonth">â†’</button>
        </div>

        <!-- Dashboard kartica -->
        <div class="analytics-dashboard" id="analyticsDashboard">
          <!-- Glavna metrika -->
          <div class="metric-card hero">
            <div class="metric-label">MjeseÄni promet</div>
            <div class="metric-value" id="metricUkupno">0,00 KM</div>
            <div class="metric-comparison" id="metricUsporedba"></div>
          </div>
          
          <!-- Grid metrika -->
          <div class="metrics-grid">
            <div class="metric-card">
              <div class="metric-icon">ğŸ“ˆ</div>
              <div class="metric-info">
                <div class="metric-value small" id="metricProsjek">0 KM</div>
                <div class="metric-label">Prosjek/dan</div>
              </div>
            </div>
            <div class="metric-card">
              <div class="metric-icon">ğŸ†</div>
              <div class="metric-info">
                <div class="metric-value small" id="metricNajbolji">-</div>
                <div class="metric-label">Najbolji dan</div>
              </div>
            </div>
            <div class="metric-card">
              <div class="metric-icon">ğŸ›’</div>
              <div class="metric-info">
                <div class="metric-value small" id="metricBroj">0</div>
                <div class="metric-label">Prodaja</div>
              </div>
            </div>
            <div class="metric-card">
              <div class="metric-icon">ğŸ’µ</div>
              <div class="metric-info">
                <div class="metric-value small" id="metricKes">0%</div>
                <div class="metric-label">KeÅ¡</div>
              </div>
            </div>
          </div>
          
          <!-- Linijski graf prometa -->
          <div class="chart-card">
            <h3 class="chart-title">ğŸ“ˆ Promet kroz mjesec</h3>
            <div class="chart-container">
              <canvas id="prometChart"></canvas>
            </div>
          </div>
          
          <!-- Top artikli pie chart -->
          <div class="chart-card">
            <h3 class="chart-title">ğŸ† Top artikli</h3>
            <div class="chart-container pie">
              <canvas id="artikliChart"></canvas>
            </div>
            <div class="top-artikli-lista" id="topArtikliLista"></div>
          </div>
          
          <!-- Promet po danima bar chart -->
          <div class="chart-card">
            <h3 class="chart-title">ğŸ“… Promet po danima</h3>
            <div class="chart-container">
              <canvas id="daniChart"></canvas>
            </div>
          </div>
          
          <!-- Trendovi -->
          <div class="chart-card">
            <h3 class="chart-title">ğŸ“Š Trendovi vs proÅ¡li mjesec</h3>
            <div class="trendovi-lista" id="trendoviLista"></div>
          </div>
        </div>

        <!-- Kalendar -->
        <div class="kalendar" id="kalendar">
          <h3 class="chart-title" style="margin-bottom: 12px;">ğŸ“… Kalendar prodaja</h3>
          <div class="kalendar-header">
            <div>Pon</div>
            <div>Uto</div>
            <div>Sri</div>
            <div>ÄŒet</div>
            <div>Pet</div>
            <div>Sub</div>
            <div>Ned</div>
          </div>
          <div class="kalendar-dani" id="kalendarDani">
            <!-- Dani se generiraju dinamiÄki -->
          </div>
        </div>

        <!-- Detalji dana -->
        <div class="dan-detalji" id="danDetalji" style="display: none;">
          <h3 class="dan-naslov" id="danNaslov"></h3>
          
          <!-- Retroaktivni unos tipke -->
          <div class="retro-buttons">
            <button class="retro-btn" id="btnRetroPromet">
              ğŸ’° Unesi dnevni promet
            </button>
            <button class="retro-btn secondary" id="btnRetroArtikal">
              â• Dodaj artikle
            </button>
          </div>
          
          <div class="dan-statistika" id="danStatistika"></div>
          <div class="dan-prodaje" id="danProdaje"></div>
        </div>
      </main>
    </div>

    <!-- Toast notifikacija -->
    <div class="toast" id="toast"></div>
    
    <!-- Delete confirmation modal -->
    <div class="modal-overlay" id="deleteModal" style="display: none;">
      <div class="modal">
        <div class="modal-icon">ğŸ—‘ï¸</div>
        <h3>ObriÅ¡i prodaju?</h3>
        <p id="deleteModalText">Jeste li sigurni?</p>
        <div class="modal-buttons">
          <button class="modal-btn cancel" id="deleteCancel">Odustani</button>
          <button class="modal-btn confirm" id="deleteConfirm">ObriÅ¡i</button>
        </div>
      </div>
    </div>
    
    <!-- Retroaktivni dnevni promet modal -->
    <div class="modal-overlay" id="retroPrometModal" style="display: none;">
      <div class="modal modal-large">
        <div class="modal-header">
          <h3>ğŸ’° Unesi dnevni promet</h3>
          <span class="modal-datum" id="retroPrometDatum"></span>
        </div>
        
        <div class="modal-body">
          <div class="form-group">
            <label>Ukupan iznos</label>
            <div class="cijena-input-wrapper">
              <input type="number" id="retroPrometIznos" class="cijena-input" placeholder="0" step="1" min="0" inputmode="numeric">
              <span class="valuta">KM</span>
            </div>
          </div>
          
          <div class="form-group">
            <label>NaÄin plaÄ‡anja</label>
            <div class="placanje-row">
              <button class="placanje-btn active" id="retroPrometKes">ğŸ’µ KeÅ¡</button>
              <button class="placanje-btn" id="retroPrometKartica">ğŸ’³ Kartica</button>
            </div>
          </div>
        </div>
        
        <div class="modal-buttons">
          <button class="modal-btn cancel" id="retroPrometCancel">Odustani</button>
          <button class="modal-btn confirm" id="retroPrometConfirm">Spremi</button>
        </div>
      </div>
    </div>
    
    <!-- Retroaktivni artikal modal -->
    <div class="modal-overlay" id="retroArtikalModal" style="display: none;">
      <div class="modal modal-large">
        <div class="modal-header">
          <h3>â• Dodaj artikal</h3>
          <span class="modal-datum" id="retroArtikalDatum"></span>
        </div>
        
        <div class="modal-body">
          <!-- Artikli grid -->
          <div class="form-group">
            <label>Artikal</label>
            <div class="artikli-grid mini" id="retroArtikliGrid"></div>
          </div>
          
          <!-- KoliÄina -->
          <div class="form-group">
            <div class="kolicina-row">
              <label>KoliÄina:</label>
              <div class="kolicina-controls">
                <button class="kolicina-btn" id="retroKolicinaMin">âˆ’</button>
                <span class="kolicina-display" id="retroKolicinaDisplay">1</span>
                <button class="kolicina-btn" id="retroKolicinaPlus">+</button>
              </div>
            </div>
          </div>
          
          <!-- Cijena -->
          <div class="form-group">
            <label>Cijena</label>
            <div class="cijena-input-wrapper">
              <input type="number" id="retroCijenaInput" class="cijena-input" placeholder="0" step="1" min="0" inputmode="numeric">
              <span class="valuta">KM</span>
            </div>
            <div class="brzi-iznosi" id="retroBrziIznosi"></div>
          </div>
          
          <!-- NaÄin plaÄ‡anja -->
          <div class="form-group">
            <div class="placanje-row">
              <button class="placanje-btn active" id="retroArtikalKes">ğŸ’µ KeÅ¡</button>
              <button class="placanje-btn" id="retroArtikalKartica">ğŸ’³ Kartica</button>
            </div>
          </div>
          
          <!-- Ukupno -->
          <div class="ukupno-preview" id="retroUkupnoPreview">
            Ukupno: <strong>0,00 KM</strong>
          </div>
        </div>
        
        <div class="modal-buttons">
          <button class="modal-btn cancel" id="retroArtikalCancel">Odustani</button>
          <button class="modal-btn confirm" id="retroArtikalConfirm">Spremi</button>
        </div>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
